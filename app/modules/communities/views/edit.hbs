<form class="stack" hx-patch="{{ community.toURL() }}">
    <h1>Edit a community</h1>
    <p class="text">Enter a name/archetype for this community</p>
    <label for="name">Name</label>
    <input autofocus name="name" placeholder="New Community" value="${ community.name }" />
    <label for="societyId">Society</label>
    <select name="societyId">
    {{#each societies}}
        <option value="{{ this.id }}" {{cx {selected: this === society} }}>{{ society.name }}</option>
    {{/each}}
    </select>

    <label for="voice">Voice</label>
    <select name="voice">
        <option value="people" {{cx {selected: community.voice == "people"} }}>Voice of the People</option>
        <option value="leader" {{cx {selected: community.voice == "leader"} }}>Voice of the Leaders</option>
    </select>
    <div class="layout-horizontal">
        <button>~ Update Community</button>
        <button type="button" value="cancel">Cancel</button>
    </div>
</form>

Handlebars.registerHelper("cx", function(props) {
    return Object.keys(props).filter( key => props[key] ).join(' ')
})